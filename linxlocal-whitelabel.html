<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Trade App Generator | AppWow Agent Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 800px;
        }

        .configurator-panel {
            padding: 40px;
            background: #f8f9fa;
            border-right: 2px solid #e0e0e0;
            overflow-y: auto;
            max-height: 800px;
        }

        .preview-panel {
            padding: 40px;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: #555;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        select:disabled {
            background: #f5f5f5;
            cursor: not-allowed;
        }

        .trade-preview {
            display: none;
            background: #f0f4ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin-top: 15px;
        }

        .trade-preview-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
        }

        .trade-preview-name {
            font-size: 1.2em;
            font-weight: 600;
            text-align: center;
            margin-bottom: 5px;
        }

        .trade-preview-desc {
            font-size: 0.9em;
            color: #666;
            text-align: center;
        }

        .feature-checkbox {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .feature-checkbox:hover {
            background: #f0f4ff;
            border-color: #667eea;
        }

        .feature-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .color-picker-group {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .color-option {
            width: 100%;
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.selected {
            border-color: #333;
            transform: scale(1.1);
        }

        .phone-preview {
            width: 375px;
            height: 667px;
            border: 16px solid #333;
            border-radius: 40px;
            background: white;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .phone-notch {
            width: 150px;
            height: 30px;
            background: #333;
            margin: 0 auto;
            border-radius: 0 0 20px 20px;
        }

        .phone-screen {
            height: calc(100% - 30px);
            overflow-y: auto;
            background: white;
        }

        .app-header {
            padding: 20px;
            color: white;
            text-align: center;
        }

        .app-content {
            padding: 20px;
        }

        .app-section {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .app-section h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .contact-button {
            display: block;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .generate-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .generate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .success-message {
            display: none;
            background: #4caf50;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 20px;
        }

        .success-message.show {
            display: block;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background: white;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .premium-badge {
            display: inline-block;
            background: #ffc107;
            color: #333;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            margin-left: 8px;
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .configurator-panel {
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
            }

            .phone-preview {
                transform: scale(0.8);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ Instant Trade App Generator</h1>
            <p>Create professional PWAs for 60+ trades in under 5 minutes</p>
        </div>

        <div class="main-layout">
            <!-- CONFIGURATOR PANEL -->
            <div class="configurator-panel">
                
                <!-- STEP 1: SELECT TRADE TYPE -->
                <div class="section">
                    <div class="section-title">1ï¸âƒ£ Select Trade Category & Type</div>
                    
                    <div class="form-group">
                        <label>Trade Category</label>
                        <select id="categorySelect">
                            <option value="">-- Select Category --</option>
                            <option value="building">ğŸ—ï¸ Building & Property Trades</option>
                            <option value="home">ğŸ¡ Home Improvement & Maintenance</option>
                            <option value="automotive">ğŸš— Automotive Trades</option>
                            <option value="specialist">ğŸ”§ Specialist Trades</option>
                            <option value="fb">ğŸ½ï¸ Food & Beverage</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Specific Trade</label>
                        <select id="tradeSelect" disabled>
                            <option value="">-- Select Trade --</option>
                        </select>
                    </div>

                    <div class="trade-preview" id="tradePreview">
                        <div class="trade-preview-icon" id="tradeIcon">ğŸ”§</div>
                        <div class="trade-preview-name" id="tradeName">Trade Name</div>
                        <div class="trade-preview-desc" id="tradeDescription">Description</div>
                    </div>
                </div>

                <!-- STEP 2: BUSINESS DETAILS -->
                <div class="section">
                    <div class="section-title">2ï¸âƒ£ Business Details</div>
                    <div class="form-group">
                        <label>Business Name</label>
                        <input type="text" id="businessName" placeholder="e.g., Smith Plumbing Services">
                    </div>
                    <div class="form-group">
                        <label>Tagline</label>
                        <input type="text" id="tagline" placeholder="e.g., Fast, Reliable, 24/7">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="phone" placeholder="07700 900123">
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="email" placeholder="info@business.co.uk">
                    </div>
                    <div class="form-group">
                        <label>Service Area</label>
                        <input type="text" id="serviceArea" placeholder="e.g., Greater Manchester">
                    </div>
                </div>

                <!-- STEP 3: CHOOSE COLOR THEME -->
                <div class="section">
                    <div class="section-title">3ï¸âƒ£ Choose Color Theme</div>
                    <div class="color-picker-group">
                        <div class="color-option" data-color="#1976d2" style="background: #1976d2;"></div>
                        <div class="color-option" data-color="#d32f2f" style="background: #d32f2f;"></div>
                        <div class="color-option" data-color="#388e3c" style="background: #388e3c;"></div>
                        <div class="color-option" data-color="#f57c00" style="background: #f57c00;"></div>
                        <div class="color-option" data-color="#7b1fa2" style="background: #7b1fa2;"></div>
                        <div class="color-option" data-color="#0097a7" style="background: #0097a7;"></div>
                        <div class="color-option" data-color="#5d4037" style="background: #5d4037;"></div>
                        <div class="color-option" data-color="#455a64" style="background: #455a64;"></div>
                    </div>
                </div>

                <!-- STEP 4: SELECT FEATURES -->
                <div class="section">
                    <div class="section-title">4ï¸âƒ£ Select Features</div>
                    
                    <!-- TRADE FEATURES -->
                    <div id="tradeFeatures">
                        <div class="feature-checkbox">
                            <input type="checkbox" id="feature-booking" checked>
                            <label for="feature-booking">ğŸ“… Instant Booking / Quote Request</label>
                        </div>
                        <div class="feature-checkbox">
                            <input type="checkbox" id="feature-gallery" checked>
                            <label for="feature-gallery">ğŸ“¸ Work Gallery / Portfolio</label>
                        </div>
                        <div class="feature-checkbox">
                            <input type="checkbox" id="feature-testimonials" checked>
                            <label for="feature-testimonials">â­ Customer Testimonials</label>
                        </div>
                        <div class="feature-checkbox">
                            <input type="checkbox" id="feature-emergency">
                            <label for="feature-emergency">ğŸš¨ Emergency Call Button</label>
                        </div>
                        <div class="feature-checkbox">
                            <input type="checkbox" id="feature-pricing">
                            <label for="feature-pricing">ğŸ’· Pricing Guide</label>
                        </div>
                    </div>

                    <!-- F&B PREMIUM FEATURES -->
                    <div id="fbFeatures" style="display: none;">
                        <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #ffc107;">
                            <strong>ğŸ½ï¸ Food & Beverage Premium Features</strong>
                        </div>
                        
                        <div class="feature-checkbox" style="background: #e8f5e9; border-color: #4caf50;">
                            <input type="checkbox" id="feature-menulinx">
                            <div>
                                <label for="feature-menulinx" style="font-weight: 600; color: #2e7d32;">
                                    ğŸ½ï¸ MenuLinx Integration<span class="premium-badge">+Â£30/month</span>
                                </label>
                                <div style="font-size: 0.85em; color: #555; margin-top: 5px;">
                                    Full menu display, online ordering, payment processing<br>
                                    <strong>Bypasses Just Eat/Deliveroo 30% commission</strong>
                                </div>
                            </div>
                        </div>

                        <div class="feature-checkbox" style="background: #e3f2fd; border-color: #2196f3;" id="preorderCheckbox">
                            <input type="checkbox" id="feature-preorder">
                            <div>
                                <label for="feature-preorder" style="font-weight: 600; color: #1565c0;">
                                    ğŸ“¦ Pre-Order Mode<span class="premium-badge">Included</span>
                                </label>
                                <div style="font-size: 0.85em; color: #555; margin-top: 5px;">
                                    <strong>Perfect for: Bakeries, Butchers, Delis, Fishmongers</strong><br>
                                    â€¢ Next-day advance orders with payment<br>
                                    â€¢ Know exact quantities before production<br>
                                    â€¢ Eliminate 60-70% waste, guarantee revenue
                                </div>
                            </div>
                        </div>

                        <div style="background: #f3e5f5; padding: 12px; border-radius: 8px; margin-top: 15px; font-size: 0.9em;">
                            <strong>ğŸ’° ROI Example:</strong><br>
                            Â£3,000/month via Just Eat = <strong style="color: #d32f2f;">Â£900 lost (30%)</strong><br>
                            MenuLinx subscription = <strong style="color: #388e3c;">Â£30/month = Â£870 saved!</strong>
                        </div>
                    </div>
                </div>

                <!-- PRICING SUMMARY -->
                <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <div class="section-title" style="color: white; border-color: white;">ğŸ’· Subscription Pricing</div>
                    <div style="font-size: 1.5em; font-weight: 600; margin-bottom: 10px;">
                        <span id="totalPrice">Â£20</span>/month
                    </div>
                    <div id="pricingBreakdown">
                        <div>âœ“ Basic Trade App: Â£20/month</div>
                    </div>
                </div>

                <!-- GENERATE BUTTON -->
                <button class="generate-button" onclick="generateApp()">
                    ğŸš€ Generate Instant App
                </button>

                <div class="success-message" id="successMessage">
                    <h3>âœ… App Generated Successfully!</h3>
                    <p>Your Instant App is ready to deploy</p>
                    <div class="qr-code">
                        <div style="font-size: 100px;">ğŸ“±</div>
                    </div>
                    <p><strong>Scan QR to install on customer's phone</strong></p>
                </div>
            </div>

            <!-- PREVIEW PANEL -->
            <div class="preview-panel">
                <h2 style="margin-bottom: 20px; color: #333;">Live Preview</h2>
                <div class="phone-preview">
                    <div class="phone-notch"></div>
                    <div class="phone-screen">
                        <div class="app-header" id="appHeader" style="background: #1976d2;">
                            <h2 id="previewBusinessName">Your Business Name</h2>
                            <p id="previewTagline">Your tagline here</p>
                        </div>
                        <div class="app-content">
                            <div class="app-section">
                                <h3>ğŸ“ Get In Touch</h3>
                                <button class="contact-button" style="background: #4caf50; color: white;">
                                    ğŸ“ Call Now
                                </button>
                                <button class="contact-button" style="background: #2196f3; color: white;">
                                    âœ‰ï¸ Email Us
                                </button>
                            </div>

                            <div class="app-section" id="bookingSection" style="display: none;">
                                <h3>ğŸ“… Book A Service</h3>
                                <p style="color: #666; font-size: 0.9em;">Quick quote request</p>
                            </div>

                            <div class="app-section" id="gallerySection" style="display: none;">
                                <h3>ğŸ“¸ Our Work</h3>
                                <p style="color: #666; font-size: 0.9em;">Before & after gallery</p>
                            </div>

                            <div class="app-section" id="testimonialsSection" style="display: none;">
                                <h3>â­ Reviews</h3>
                                <p style="color: #666; font-size: 0.9em;">5-star testimonials</p>
                            </div>

                            <div class="app-section" id="emergencySection" style="display: none;">
                                <h3>ğŸš¨ Emergency</h3>
                                <button class="contact-button" style="background: #f44336; color: white;">
                                    ğŸš¨ Emergency Call
                                </button>
                            </div>

                            <div class="app-section" id="menulinxSection" style="display: none;">
                                <h3>ğŸ½ï¸ Our Menu</h3>
                                <div style="background: #f5f5f5; padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                                    <div style="display: flex; justify-content: space-between;">
                                        <div>
                                            <strong>Sourdough Loaf</strong><br>
                                            <span style="font-size: 0.85em; color: #666;">Fresh daily</span>
                                        </div>
                                        <strong style="color: #4caf50;">Â£4.50</strong>
                                    </div>
                                </div>
                                <button class="contact-button" style="background: #4caf50; color: white;">
                                    ğŸ›’ Order Now
                                </button>
                            </div>

                            <div class="app-section" id="preorderSection" style="display: none;">
                                <h3>ğŸ“¦ Pre-Order Tomorrow</h3>
                                <div style="background: #e3f2fd; padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #2196f3;">
                                    <strong>Order by 8pm tonight</strong><br>
                                    <span style="font-size: 0.85em;">Fresh for tomorrow</span>
                                </div>
                                <button class="contact-button" style="background: #2196f3; color: white;">
                                    ğŸ“… Pre-Order
                                </button>
                                <p style="font-size: 0.85em; color: #666; text-align: center; margin-top: 10px;">
                                    Pay now â€¢ Collect tomorrow â€¢ Zero waste
                                </p>
                            </div>

                            <div class="app-section">
                                <h3>ğŸ“ Service Area</h3>
                                <p id="previewServiceArea" style="color: #666;">Your service area</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedTrade = '';
        let selectedTradeType = '';
        let selectedColor = '#1976d2';

        // Comprehensive trade database based on UK listing
        const tradeDatabase = {
            building: [
                { id: 'plumber', name: 'Plumber', icon: 'ğŸ”§', type: 'trade' },
                { id: 'electrician', name: 'Electrician', icon: 'âš¡', type: 'trade' },
                { id: 'gasengineer', name: 'Gas Engineer', icon: 'ğŸ”¥', type: 'trade' },
                { id: 'builder', name: 'General Builder', icon: 'ğŸ—ï¸', type: 'trade' },
                { id: 'bricklayer', name: 'Bricklayer', icon: 'ğŸ§±', type: 'trade' },
                { id: 'carpenter', name: 'Carpenter/Joiner', icon: 'ğŸªµ', type: 'trade' },
                { id: 'plasterer', name: 'Plasterer', icon: 'ğŸ¯', type: 'trade' },
                { id: 'roofer', name: 'Roofer', icon: 'ğŸ ', type: 'trade' },
                { id: 'locksmith', name: 'Locksmith', icon: 'ğŸ”', type: 'trade' },
                { id: 'glazier', name: 'Glazier', icon: 'ğŸªŸ', type: 'trade' },
                { id: 'dampproof', name: 'Damp Proofing', icon: 'ğŸ’§', type: 'trade' },
                { id: 'drainage', name: 'Drainage Specialist', icon: 'ğŸš°', type: 'trade' }
            ],
            home: [
                { id: 'painter', name: 'Painter & Decorator', icon: 'ğŸ¨', type: 'trade' },
                { id: 'tiler', name: 'Tiler', icon: 'ğŸ”²', type: 'trade' },
                { id: 'flooring', name: 'Flooring Specialist', icon: 'ğŸªœ', type: 'trade' },
                { id: 'kitchenfitter', name: 'Kitchen Fitter', icon: 'ğŸ³', type: 'trade' },
                { id: 'bathroomfitter', name: 'Bathroom Fitter', icon: 'ğŸš¿', type: 'trade' },
                { id: 'landscaper', name: 'Landscaper', icon: 'ğŸŒ³', type: 'trade' },
                { id: 'gardener', name: 'Gardener', icon: 'ğŸŒ±', type: 'trade' },
                { id: 'treesurgeon', name: 'Tree Surgeon', icon: 'ğŸª“', type: 'trade' },
                { id: 'fencing', name: 'Fencing Contractor', icon: 'ğŸªµ', type: 'trade' },
                { id: 'driveway', name: 'Driveway Specialist', icon: 'ğŸ›£ï¸', type: 'trade' },
                { id: 'windowcleaner', name: 'Window Cleaner', icon: 'ğŸ§½', type: 'trade' }
            ],
            automotive: [
                { id: 'mobilemechanic', name: 'Mobile Mechanic', icon: 'ğŸš—', type: 'trade' },
                { id: 'mobiletyres', name: 'Mobile Tyre Fitting', icon: 'ğŸ›', type: 'trade' },
                { id: 'mobilevaleting', name: 'Mobile Valeting', icon: 'ğŸ§¼', type: 'trade' },
                { id: 'windscreen', name: 'Windscreen Repair', icon: 'ğŸªŸ', type: 'trade' },
                { id: 'garage', name: 'Independent Garage', icon: 'ğŸ”§', type: 'trade' },
                { id: 'autoelectrician', name: 'Auto Electrician', icon: 'ğŸ”Œ', type: 'trade' },
                { id: 'bodyshop', name: 'Body Shop', icon: 'ğŸ¨', type: 'trade' }
            ],
            specialist: [
                { id: 'security', name: 'Security/Alarm Installer', icon: 'ğŸ”’', type: 'trade' },
                { id: 'av', name: 'Audio/Visual Installer', icon: 'ğŸ“º', type: 'trade' },
                { id: 'aerial', name: 'Aerial/Satellite Engineer', icon: 'ğŸ“¡', type: 'trade' },
                { id: 'appliance', name: 'Appliance Repair', icon: 'ğŸ”§', type: 'trade' },
                { id: 'cleaner', name: 'Domestic Cleaner', icon: 'ğŸ§¹', type: 'trade' },
                { id: 'carpet', name: 'Carpet Cleaner', icon: 'ğŸ§¼', type: 'trade' },
                { id: 'oven', name: 'Oven Cleaner', icon: 'ğŸ³', type: 'trade' },
                { id: 'pest', name: 'Pest Control', icon: 'ğŸ€', type: 'trade' },
                { id: 'handyman', name: 'Handyman', icon: 'ğŸ”¨', type: 'trade' },
                { id: 'removals', name: 'Removals/Man & Van', icon: 'ğŸšš', type: 'trade' }
            ],
            fb: [
                { id: 'cafe', name: 'CafÃ©', icon: 'â˜•', type: 'fb' },
                { id: 'restaurant', name: 'Restaurant', icon: 'ğŸ½ï¸', type: 'fb' },
                { id: 'takeaway', name: 'Takeaway', icon: 'ğŸ¥¡', type: 'fb' },
                { id: 'bakery', name: 'Bakery', icon: 'ğŸ¥–', type: 'fb' },
                { id: 'deli', name: 'Delicatessen', icon: 'ğŸ§€', type: 'fb' },
                { id: 'butcher', name: 'Butcher', icon: 'ğŸ¥©', type: 'fb' },
                { id: 'greengrocer', name: 'Greengrocer', icon: 'ğŸ¥¬', type: 'fb' },
                { id: 'foodtruck', name: 'Food Truck', icon: 'ğŸšš', type: 'fb' },
                { id: 'caterer', name: 'Mobile Caterer', icon: 'ğŸ±', type: 'fb' },
                { id: 'icecream', name: 'Ice Cream Van', icon: 'ğŸ¦', type: 'fb' },
                { id: 'popup', name: 'Pop-Up Restaurant', icon: 'ğŸª', type: 'fb' },
                { id: 'cakemaker', name: 'Cake Maker', icon: 'ğŸ‚', type: 'fb' },
                { id: 'pub', name: 'Independent Pub', icon: 'ğŸº', type: 'fb' },
                { id: 'winebar', name: 'Wine Bar', icon: 'ğŸ·', type: 'fb' },
                { id: 'fishmonger', name: 'Fishmonger', icon: 'ğŸŸ', type: 'fb' }
            ]
        };

        // Category selection
        document.getElementById('categorySelect').addEventListener('change', function() {
            const category = this.value;
            const tradeSelect = document.getElementById('tradeSelect');
            const tradePreview = document.getElementById('tradePreview');
            
            tradeSelect.innerHTML = '<option value="">-- Select Trade --</option>';
            tradePreview.style.display = 'none';
            selectedTrade = '';
            selectedTradeType = '';
            
            if (category && tradeDatabase[category]) {
                tradeSelect.disabled = false;
                tradeDatabase[category].forEach(trade => {
                    const option = document.createElement('option');
                    option.value = trade.id;
                    option.textContent = `${trade.icon} ${trade.name}`;
                    option.dataset.icon = trade.icon;
                    option.dataset.name = trade.name;
                    option.dataset.type = trade.type;
                    tradeSelect.appendChild(option);
                });
            } else {
                tradeSelect.disabled = true;
            }
            
            // Hide F&B features if switching away from F&B
            if (category !== 'fb') {
                document.getElementById('tradeFeatures').style.display = 'block';
                document.getElementById('fbFeatures').style.display = 'none';
            }
        });

        // Trade selection
        document.getElementById('tradeSelect').addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            
            if (this.value) {
                selectedTrade = this.value;
                selectedTradeType = selectedOption.dataset.type;
                
                // Show preview
                document.getElementById('tradeIcon').textContent = selectedOption.dataset.icon;
                document.getElementById('tradeName').textContent = selectedOption.dataset.name;
                document.getElementById('tradePreview').style.display = 'block';
                
                // Auto-populate business name
                const businessNameInput = document.getElementById('businessName');
                if (!businessNameInput.value) {
                    businessNameInput.value = `${selectedOption.dataset.name} Business`;
                    updatePreview();
                }
                
                // Show/hide feature sections
                if (selectedTradeType === 'fb') {
                    document.getElementById('tradeFeatures').style.display = 'none';
                    document.getElementById('fbFeatures').style.display = 'block';
                } else {
                    document.getElementById('tradeFeatures').style.display = 'block';
                    document.getElementById('fbFeatures').style.display = 'none';
                }
                
                updatePricing();
            } else {
                document.getElementById('tradePreview').style.display = 'none';
                selectedTrade = '';
                selectedTradeType = '';
            }
        });

        // Color selection
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                selectedColor = this.dataset.color;
                document.getElementById('appHeader').style.background = selectedColor;
            });
        });

        // Feature checkboxes
        document.querySelectorAll('.feature-checkbox').forEach(checkbox => {
            checkbox.addEventListener('click', function(e) {
                if (e.target.type === 'checkbox') return;
                const input = this.querySelector('input[type="checkbox"]');
                input.checked = !input.checked;
                updateFeatures();
                updatePricing();
            });
        });

        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                updateFeatures();
                updatePricing();
            });
        });

        // MenuLinx dependency
        document.getElementById('feature-menulinx')?.addEventListener('change', function() {
            const preorderCheckbox = document.getElementById('preorderCheckbox');
            const preorderInput = document.getElementById('feature-preorder');
            
            if (!this.checked) {
                preorderInput.checked = false;
                preorderCheckbox.style.opacity = '0.5';
                preorderCheckbox.style.pointerEvents = 'none';
            } else {
                preorderCheckbox.style.opacity = '1';
                preorderCheckbox.style.pointerEvents = 'auto';
            }
        });

        // Live updates
        document.getElementById('businessName').addEventListener('input', updatePreview);
        document.getElementById('tagline').addEventListener('input', updatePreview);
        document.getElementById('serviceArea').addEventListener('input', updatePreview);

        function updatePreview() {
            const businessName = document.getElementById('businessName').value || 'Your Business Name';
            const tagline = document.getElementById('tagline').value || 'Your tagline here';
            const serviceArea = document.getElementById('serviceArea').value || 'Your service area';

            document.getElementById('previewBusinessName').textContent = businessName;
            document.getElementById('previewTagline').textContent = tagline;
            document.getElementById('previewServiceArea').textContent = serviceArea;
        }

        function updateFeatures() {
            // Trade features
            document.getElementById('bookingSection').style.display = 
                document.getElementById('feature-booking')?.checked ? 'block' : 'none';
            document.getElementById('gallerySection').style.display = 
                document.getElementById('feature-gallery')?.checked ? 'block' : 'none';
            document.getElementById('testimonialsSection').style.display = 
                document.getElementById('feature-testimonials')?.checked ? 'block' : 'none';
            document.getElementById('emergencySection').style.display = 
                document.getElementById('feature-emergency')?.checked ? 'block' : 'none';

            // F&B features
            const menulinxChecked = document.getElementById('feature-menulinx')?.checked || false;
            const preorderChecked = document.getElementById('feature-preorder')?.checked || false;

            document.getElementById('menulinxSection').style.display = menulinxChecked ? 'block' : 'none';
            document.getElementById('preorderSection').style.display = (menulinxChecked && preorderChecked) ? 'block' : 'none';
        }

        function updatePricing() {
            let total = 20;
            let breakdown = ['âœ“ Basic Trade App: Â£20/month'];

            const menulinxChecked = document.getElementById('feature-menulinx')?.checked || false;
            const preorderChecked = document.getElementById('feature-preorder')?.checked || false;

            if (menulinxChecked) {
                total += 30;
                breakdown.push('âœ“ MenuLinx Integration: Â£30/month');
                if (preorderChecked) {
                    breakdown.push('âœ“ Pre-Order Mode: Included');
                }
            }

            document.getElementById('totalPrice').textContent = 'Â£' + total;
            document.getElementById('pricingBreakdown').innerHTML = breakdown.join('<br>');
        }

        function generateApp() {
            if (!selectedTrade) {
                alert('âš ï¸ Please select both category and trade type!');
                return;
            }

            const businessName = document.getElementById('businessName').value;
            if (!businessName) {
                alert('âš ï¸ Please enter a business name!');
                return;
            }

            const phone = document.getElementById('phone').value;
            if (!phone) {
                alert('âš ï¸ Please enter a phone number!');
                return;
            }

            let features = [];
            const menulinxChecked = document.getElementById('feature-menulinx')?.checked || false;
            const preorderChecked = document.getElementById('feature-preorder')?.checked || false;

            if (menulinxChecked) {
                features.push('MenuLinx Ordering System');
                if (preorderChecked) {
                    features.push('Pre-Order Mode (Perishables)');
                }
            }

            let monthlyCost = 20;
            if (menulinxChecked) monthlyCost += 30;

            document.getElementById('successMessage').classList.add('show');

            const tradeSelect = document.getElementById('tradeSelect');
            const selectedOption = tradeSelect.options[tradeSelect.selectedIndex];
            const tradeName = selectedOption.dataset.name;

            setTimeout(() => {
                let message = 'âœ… INSTANT APP GENERATED!\n\n' +
                      'ğŸ“± Trade: ' + tradeName + '\n' +
                      'ğŸ¢ Business: ' + businessName + '\n' +
                      'ğŸ¨ Color: ' + selectedColor + '\n' +
                      'ğŸ“ Phone: ' + phone + '\n' +
                      'ğŸ’· Subscription: Â£' + monthlyCost + '/month\n';

                if (features.length > 0) {
                    message += '\nğŸ¯ Premium Features:\n';
                    features.forEach(f => message += '  â€¢ ' + f + '\n');
                }

                message += '\nâœ¨ Ready to publish to AppWow!\n' +
                          'ğŸ“± QR code generated for instant install\n' +
                          'ğŸš€ Deploy to marketplace now';

                alert(message);
            }, 500);
        }

        // Initialize
        document.querySelector('.color-option[data-color="#1976d2"]').classList.add('selected');
        updateFeatures();
        updatePricing();
    </script>
</body>
</html>